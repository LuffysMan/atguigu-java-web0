# 熟悉QQZone业务需求
1. 用户登录
2. 登录成功, 显示主界面
   1. 左侧显示好友列表
   2. 上端显示欢迎词, 如果不是自己的空间, 显示超链接: 返回自己的空间
   3. 下端显示日志列表
3. 查看日志详情
   1. 日志本身(作者头像, 昵称, 标题, 内容, 日期)
   2. 回复列表(回复者头像,昵称,内容,日期)
   3. 主人回复信息
4. 删除日志
5. 删除特定回复
6. 删除特定主人回复
7. 添加日志, 添加回复, 添加主人回复
8. 点击左侧好友链接, 进入好友空间
9. 数据库的范式
   1. 第一范式: 列不可再分
   2. 第二范式: 一张表只表达一层含义, 一件事情 或者 一个实体
   3. 第三范式: 表中的每一列和主键都是直接依赖, 而不是间接依赖
10. 数据库设计的范式和数据库的查询性能很多时候是相悖的, 需要抉择
    1. 查询频次不高时, 倾向于提高数据库的设计范式, 提高存储效率
    2. 查询频次较高时, 倾向于牺牲数据库设计的规范度, 降低设计范式, 允许一定的冗余, 提高查询的效率
11. 数据库设计
    1. 抽取实体
       1. 用户
          1. 用户登录信息
          2. 用户详情信息
       2. 日志
       3. 回帖
       4. 主人回复
    2. 分析其中的属性
       1. 用户登录信息:
          1. 账户
          2. 密码
          3. 头像
          4. 昵称
       2. 用户详情信息
          1. 真实姓名
          2. 星座
          3. 血型
          4. 邮箱
          5. 手机号
          6. ...
       3. 日志:
          1. 标题
          2. 内容
          3. 日期
          4. 作者
       4. 回复
          1. 内容
          2. 日期
          3. 作者
          4. 日志
       5. 主人回复
          1. 内容
          2. 日期
          3. 作者
          4. 回复
    3. 分析实体之间的关系
       1. 用户登录信息 : 用户详情信息 1:1  PK
       2. 用户: 日志               1:N
       3. 日志: 回复               1:N
       4. 回复: 主人回复            1:1 UK
       5. 用户: 好友               M:N

# QQZone 登录功能实现出现的几个错误
1. URL 没有加 .do, 导致 DispatcherServlet 拦截不到
2. login.html 没有经过 thymeleaf 渲染
3. 数据库查出来的 INT UNSIGNED 类型是 Long, 无法设置到 pojo中, 因为 pojo中是Integer
4. rsmd.getColumnName() 和 rsmd.getColumnLabel() 的区别
5. left.html页面没有样式, 同时数据也不展示. 原因: 没有经过 thymeleaf 渲染

# 今日内容
1. top.html 页面显示登陆者昵称, 判断是否是自己的空间
2. 点击左侧好友链接, 进入好友的空间
   1. 根据id获取userBasic信息, 获取其topicList, 覆盖掉session中的friend
   2. main 页面应该展示friend中的topicList, 而不是 userBasic 中的 topicList
   3. 跳转后, 在左侧(left)中显示整个index页面
      1. 问题: 在left页面显示整个index布局
      2. 解决: 给超链接添加target属性: target="_top", 保证在顶层窗口显示整个index页面
3. 日志详情页面
   1. 已知topic的id, 需要根据topic的id获取特定topic
   2. 获取这个topic关联的所有的回复
   3. 如果某个回复有主人回复, 需要查询出来
   4. 在TopicController中获取指定的topic
   5. 具体这个topic中关联多少个reply, 有ReplyService内部实现
   6. 获取到的topic中的author只有id, 那么需要在topicService的getTopic方法中封装, 在查询topic本身信息时, 同时调用userBasicService的
      getUserBasicById方法, 并关联到topic中.
4. 添加回复
5. 删除回复
   1. 如果回复有关联的主人回复, 需要先删除主人回复
   2. 删除自己的回复
      1. Cannot delete or update a parent row: a foreign key constraint fails.
      2. 我们在删除回复表记录时, 发现删除失败, 原因是有其他表在引用这条记录. 
      3. 如果需要删除主表数据, 要先删除字表数据.
6. 删除日志